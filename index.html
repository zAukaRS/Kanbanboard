<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script defer src="js/vue.js"></script>
    <script defer src="js/app.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <title>Kanban board</title>
</head>
<body>
<div id="app">
    <div class="header">
        <h2>Kanban Board</h2>
        <div class="task-form">
            <input v-model="newTask.title" placeholder="üîñ –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
            <input v-model="newTask.description" placeholder="üìù –û–ø–∏—Å–∞–Ω–∏–µ">
            <input type="date" v-model="newTask.deadline">
            <button @click="addTask">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>
    <div class="board">
        <div class="column" v-for="(column, colIndex) in columns" :key="colIndex"
            @dragover="dragOver"
            @dragenter="dragOver"
            @dragleave="dragLeave"
            @drop="drop($event, colIndex)">
            <h3>{{ column.title }}</h3>
            <div class="task" v-for="task in column.tasks" :key="task.createdAt" draggable="true"
                @dragstart="colIndex !== 3 && dragStart($event, task, colIndex)"
                @dragend="$event.target.classList.remove('dragging')">
                <h4>{{ task.title }}</h4>
                <p>{{ task.description }}</p>
                <p>–î—ç–¥–ª–∞–π–Ω: {{ task.deadline }}</p>
                <p>–°–æ–∑–¥–∞–Ω–æ: {{ new Date(task.createdAt).toLocaleString() }}</p>
                <p>–ò–∑–º–µ–Ω–µ–Ω–æ: {{ new Date(task.lastEdited).toLocaleString() }}</p>
                <p v-if="colIndex === 3" :class="{ overdue: task.status === 'overdue', completed: task.status === 'completed' }">
                    {{ task.status === 'overdue' ? '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ' : '–í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —Å—Ä–æ–∫' }}
                </p>
                <button v-if="colIndex !== 3" @click="editTask(task)">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button @click="deleteTask(task, colIndex)">–£–¥–∞–ª–∏—Ç—å</button>
                <button v-if="colIndex < columns.length - 1" @click="moveTask(task, colIndex, colIndex + 1)">–î–∞–ª–µ–µ</button>
                <button v-if="colIndex !== 3" @click="moveTask(task, colIndex, colIndex - 1)">–ù–∞–∑–∞–¥</button>
                <div v-if="colIndex === 2">
                    <input v-model="returnReason" placeholder="–ü—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞">
                    <button @click="returnTask(task, colIndex)">–í–µ—Ä–Ω—É—Ç—å</button>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
